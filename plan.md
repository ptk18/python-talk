## Task: Add “Interpreted command” + collapsible “Other ways to say it” (Claude API)

### Goal

After the user sends a message (speech → text or typed), show a small UI card **right under the user message** in the chat:

* **Interpreted command:** `multiply(a=5,b=4)` (use the command your pipeline already produced)
* Optional: **Confidence:** High / Medium / Low (if you have a score; otherwise omit)
* A collapsed link: **“Other ways to say it”**
* When expanded: show **5–10 paraphrased variants** generated by Claude, based on the user’s sentence, **keeping the same meaning and numbers**.

### Requirements

* This is a **separate feature task**. Do not refactor unrelated UI.
* Must use the **existing Claude API integration** (no new providers, no new auth system).
* Paraphrases should be generated **only after a user message is received**, and should not block the main command execution.
* Default UI is **collapsed**. Expand only if user clicks.
* Cache paraphrases per message so you don’t re-call Claude when toggling expand/collapse.

### Backend/API (minimal)

1. Add a new endpoint (or function) like:

   * `POST /api/paraphrase`
   * Input: `{ text: string, max_variants: number }`
   * Output: `{ variants: string[] }`

2. Implement it using the existing Claude client.

   * Prompt Claude to output **strict JSON** only.
   * Constraints:

     * Keep numbers unchanged
     * Keep operation/intent unchanged
     * Short natural variants (voice-friendly)

**Claude prompt template (use exactly this idea):**
System:
“You generate paraphrases for a voice command. Keep meaning identical.”

User:
Generate 10 alternative phrasings for this command: "<USER_TEXT>"
Rules:

* Keep the same numbers and entities (do not change 5 to five unless the original is words)
* Keep the same operation/intent
* Output ONLY valid JSON in this format:
  {"variants":["...", "..."]}

3. Add server-side validation:

* Ensure returned JSON parses
* Ensure `variants` length ≤ 10
* Ensure each variant includes the same digits if the original used digits (basic check)

### Frontend/UI

1. In the chat message renderer (middle panel), for each **user message**, render a small card directly beneath it:

* Line 1: `Interpreted command: <your_existing_command_string>`
* Line 2 (optional): `Confidence: <High|Medium|Low>`
* Link/button: “Other ways to say it” (collapsed by default)

2. On first expand click:

* Call `POST /api/paraphrase` with the original user text
* Store result in message state (e.g., `message.paraphrases`)
* Show a loading state: “Generating suggestions…”

3. Expanded view:

* List 5–10 paraphrases as small bullet lines or chips
* Add “Hide” toggle

### Acceptance criteria

* After sending “Multiply 5 and 4”, the UI shows:

  * Interpreted command: `multiply(a=5,b=4)`
  * “Other ways to say it” (collapsed)
* On expand, it shows 5–10 variants generated by Claude
* No duplicate Claude calls when toggling open/close
* Main pipeline still works the same; paraphrase generation is additive only
