import{_ as D,S as B,c as k,a as j,b as e,r as A,w as y,v as S,d as H,t as _,F as G,e as N,f as R,g as F,u as P,h as U,i as O,j as c,k as Q,o as W,n as q,s as z,l as J,m as p,p as l,q as K,x as w}from"./index-UvL5GCRC.js";const X={name:"Home",components:{Sidebar:B},setup(){const m=K(),{user:t}=P(),{language:h,setLanguage:n}=U(),{ttsEnabled:v,setTTSEnabled:C}=O(),s=c(""),a=c(""),r=c([]),i=c(null),u=c(null),f=c(!1),M=Q(()=>r.value.filter(o=>o.title.toLowerCase().includes(a.value.toLowerCase())||o.file_name&&o.file_name.toLowerCase().includes(a.value.toLowerCase()))),g=async()=>{if(t.value)try{const o=await p.getByUser(t.value.id);r.value=o}catch{alert("Failed to fetch conversations.")}},x=()=>{var o;(o=u.value)==null||o.click()},L=o=>{var b;const d=(b=o.target.files)==null?void 0:b[0];d&&(i.value=d)},T=async()=>{if(!s.value.trim()||!i.value){l.speak("Please enter a title and select a Python file"),alert("Please enter a title and select a Python file.");return}try{const o=await i.value.text();await p.create(t.value.id,{title:s.value,file_name:i.value.name,code:o}),s.value="",i.value=null,u.value&&(u.value.value=""),l.speak("Conversation created successfully"),g()}catch{l.speak("Failed to create conversation"),alert("Failed to create conversation.")}},I=o=>{m.push(`/workspace?conversationId=${o}`)},E=async o=>{if(!window.confirm("Are you sure you want to delete this conversation?")){l.speak("Deletion cancelled");return}try{await p.delete(o),l.speak("Conversation deleted successfully"),g()}catch{l.speak("Failed to delete conversation"),alert("Failed to delete conversation.")}},V=()=>{const o=new Date().getHours();return o>=5&&o<12?"Good Morning, Sir":o>=12&&o<17?"Good Afternoon, Sir":o>=17&&o<21?"Good Evening, Sir":"Welcome, Sir"};return W(()=>{g();const o=()=>{if(!f.value&&t.value){f.value=!0,l.enableAudioContext();const d=V();l.speak(d),document.removeEventListener("click",o),document.removeEventListener("keydown",o)}};document.addEventListener("click",o),document.addEventListener("keydown",o)}),{title:s,searchQuery:a,conversations:r,selectedFile:i,fileInputRef:u,filteredConversations:M,language:h,ttsEnabled:v,langIcon:J,soundIcon:z,nosoundIcon:q,handleFileSelect:x,handleFileChange:L,handleCreate:T,handleConversationClick:I,handleDeleteConversation:E,toggleLanguage:()=>{n(h.value==="en"?"th":"en")},toggleTTS:()=>{C(!v.value)}}}},Y={class:"app-container"},Z={class:"main-content"},$={class:"top-header"},ee={class:"section-header"},te={class:"control-buttons"},oe=["title"],ne=["src"],ae=["title"],le=["src"],se={class:"content-area"},re={class:"homeReal__viewport"},ie={class:"homeReal__headerRow"},ce={class:"homeReal__titleWrapper"},de={class:"homeReal__panel"},ue={class:"homeReal__searchWrap"},he={class:"homeReal__list"},ve=["onClick"],ge={class:"homeReal__row-actions"},ke=["onClick"],_e=["onClick"];function pe(m,t,h,n,v,C){const s=A("Sidebar");return w(),k("div",Y,[j(s),e("main",Z,[e("header",$,[e("div",ee,[t[7]||(t[7]=e("h2",{class:"page-title"},"Conversation Manager",-1)),e("div",te,[e("button",{class:"control-button",onClick:t[0]||(t[0]=(...a)=>n.toggleLanguage&&n.toggleLanguage(...a)),title:`Switch to ${n.language==="en"?"Thai":"English"}`},[e("img",{src:n.langIcon,alt:"Language",class:"control-icon"},null,8,ne)],8,oe),e("button",{class:"control-button",onClick:t[1]||(t[1]=(...a)=>n.toggleTTS&&n.toggleTTS(...a)),title:n.ttsEnabled?"Disable Voice":"Enable Voice"},[e("img",{src:n.ttsEnabled?n.soundIcon:n.nosoundIcon,alt:"Sound",class:"control-icon"},null,8,le)],8,ae)])])]),e("div",se,[e("div",re,[e("div",ie,[e("div",ce,[t[8]||(t[8]=e("span",{class:"homeReal__titleLabel"},"Title: ",-1)),y(e("input",{class:"homeReal__titleInput",placeholder:"","onUpdate:modelValue":t[2]||(t[2]=a=>n.title=a)},null,512),[[S,n.title]])]),e("input",{ref:"fileInputRef",type:"file",accept:".py",style:{display:"none"},onChange:t[3]||(t[3]=(...a)=>n.handleFileChange&&n.handleFileChange(...a))},null,544),e("button",{class:"homeReal__btn",onClick:t[4]||(t[4]=(...a)=>n.handleFileSelect&&n.handleFileSelect(...a))},[H(_(n.selectedFile?n.selectedFile.name:"Upload File")+" ",1),t[9]||(t[9]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),e("button",{class:"homeReal__btn homeReal__btn--create",onClick:t[5]||(t[5]=(...a)=>n.handleCreate&&n.handleCreate(...a))},"Create")]),e("div",de,[e("div",ue,[y(e("input",{class:"homeReal__search",placeholder:"Search...","onUpdate:modelValue":t[6]||(t[6]=a=>n.searchQuery=a)},null,512),[[S,n.searchQuery]]),t[10]||(t[10]=e("button",{class:"homeReal__searchIcon",type:"button","aria-label":"Search"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor","stroke-width":"2"}),e("path",{d:"m20 20-4-4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1))]),e("div",he,[(w(!0),k(G,null,N(n.filteredConversations,a=>(w(),k("div",{key:a.id,class:"homeReal__row"},[e("div",{class:"homeReal__row-content",onClick:r=>n.handleConversationClick(a.id)},[e("strong",null,_(a.title),1),t[11]||(t[11]=e("br",null,null,-1)),e("small",null,"File: "+_(a.file_name||"N/A"),1)],8,ve),e("div",ge,[e("button",{class:"homeReal__icon-btn",onClick:R(r=>n.handleConversationClick(a.id),["stop"]),title:"Open File","aria-label":"Open File"},[...t[12]||(t[12]=[F('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb79ec><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9l-7-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-22cb79ec></path><path d="M13 2v7h7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-22cb79ec></path><path d="M10 13l-3 3 3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-22cb79ec></path><path d="M17 16H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-22cb79ec></path></svg>',1)])],8,ke),e("button",{class:"homeReal__icon-btn homeReal__icon-btn--delete",onClick:R(r=>n.handleDeleteConversation(a.id),["stop"]),title:"Delete Conversation","aria-label":"Delete Conversation"},[...t[13]||(t[13]=[F('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-22cb79ec><path d="M3 6h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-22cb79ec></path><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-22cb79ec></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-22cb79ec></path><path d="M10 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-22cb79ec></path><path d="M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-22cb79ec></path></svg>',1)])],8,_e)])]))),128))])])])])])])}const fe=D(X,[["render",pe],["__scopeId","data-v-22cb79ec"]]);export{fe as default};
