import{_ as k,S as R,N as T,o as r,c as l,a as _,b as e,F as v,d as C,g as u,t as h,h as y,j as I,v as b,O as S,i as O,D as M}from"./index-DW7vJBLa.js";import{f as H,g as F,t as P,c as E,s as U,u as V}from"./R-span-BQ70ABCA.js";import{r as B,u as L}from"./R-redo-BdLCXmmQ.js";const A={name:"Run",components:{TopToolbar:T,Sidebar:R},data(){return{uploadFileIcon:V,undoIcon:L,redoIcon:B,spanIcon:U,clearIcon:E,textModeIcon:P,graphicModeIcon:F,functionPanelIcon:H,isTextMode:!0,isFunctionPanelOpen:!1,availableFunctions:[{id:1,name:"Voice Recognition",description:"Convert speech to text using advanced AI models"},{id:2,name:"Code Execution",description:"Run Python code and see results in real-time"},{id:3,name:"Chat Assistant",description:"Interactive AI chat for coding assistance"},{id:4,name:"Function Extraction",description:"Extract and save functions from conversations"},{id:5,name:"Code Analysis",description:"Analyze code for errors and improvements"},{id:6,name:"History Management",description:"View and manage your chat and code history"}],inputMessage:"",messages:[],isRecording:!1,recognition:null,chatId:null,code:`# Welcome to PyTalk Code Runner
# Enter your Python code here and click Run

print("Hello, World!")
print("This is a Python code runner")

# Example: Simple calculation
result = 10 + 20
print(f"10 + 20 = {result}")`,output:[],isRunning:!1,isOutputExpanded:!1,codeHistory:[],historyIndex:-1,isUndoRedo:!1}},watch:{code(n,t){!this.isUndoRedo&&t!==void 0&&this.saveToHistory(),this.isUndoRedo=!1}},computed:{canUndo(){return this.historyIndex>0},canRedo(){return this.historyIndex<this.codeHistory.length-1}},mounted(){this.codeHistory=[this.code],this.historyIndex=0;const n=this.$route.query.id;if(n?this.loadChat(n):this.chatId=this.generateChatId(),"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const t=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new t,this.recognition.continuous=!1,this.recognition.interimResults=!1,this.recognition.lang="en-US",this.recognition.onresult=c=>{const a=c.results[0][0].transcript;this.inputMessage=a,this.isRecording=!1},this.recognition.onerror=()=>{this.isRecording=!1},this.recognition.onend=()=>{this.isRecording=!1}}},beforeUnmount(){this.messages.length>0&&this.saveChat()},methods:{generateChatId(){return"chat_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)},loadChat(n){const t=localStorage.getItem("chatHistory");if(t){const a=JSON.parse(t).find(o=>o.id===n);a&&(this.chatId=a.id,this.messages=a.messages||[],this.scrollChatToBottom())}},saveChat(){var n;if(this.messages.length!==0){this.chatId||(this.chatId=this.generateChatId());try{const t={id:this.chatId,messages:[...this.messages],createdAt:((n=this.messages[0])==null?void 0:n.timestamp)||new Date().toISOString(),updatedAt:new Date().toISOString()};let c=[];const a=localStorage.getItem("chatHistory");if(a)try{c=JSON.parse(a),c=c.filter(o=>o.id!==this.chatId)}catch(o){console.error("Error parsing chat history:",o),c=[]}c.unshift(t),c.length>50&&(c=c.slice(0,50)),localStorage.setItem("chatHistory",JSON.stringify(c))}catch(t){console.error("Error saving chat:",t)}}},sendMessage(){if(this.inputMessage.trim()){const n=new Date,t=n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});this.messages.push({text:this.inputMessage,type:"sent",time:t,timestamp:n.toISOString()}),this.inputMessage="",this.saveChat(),this.scrollChatToBottom(),setTimeout(()=>{const c=new Date;this.messages.push({text:"Thank you for your message!",type:"received",time:c.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),timestamp:c.toISOString()}),this.saveChat(),this.scrollChatToBottom()},1e3)}},toggleRecording(){if(!this.recognition){alert("Speech recognition is not supported in your browser");return}this.isRecording?(this.recognition.stop(),this.isRecording=!1):(this.recognition.start(),this.isRecording=!0)},scrollChatToBottom(){this.$nextTick(()=>{const n=this.$refs.messagesContainer;n&&(n.scrollTop=n.scrollHeight)})},async runCode(){if(!this.code.trim()){this.addOutput("error","Please enter some code to run");return}this.isRunning=!0,this.addOutput("input",this.code);try{const n=await this.executeCode(this.code);this.addOutput("output",n)}catch(n){this.addOutput("error",n.message||"An error occurred while running the code")}finally{this.isRunning=!1,this.scrollOutputToBottom()}},async executeCode(n){return new Promise((t,c)=>{setTimeout(()=>{try{let a="";(n.match(/print\(['"](.*?)['"]\)/g)||[]).forEach(g=>{var d;const s=((d=g.match(/['"](.*?)['"]/))==null?void 0:d[1])||"";a+=s+`
`}),(n.match(/(\w+)\s*=\s*(\d+)\s*([+\-*/])\s*(\d+)/g)||[]).forEach(g=>{const s=g.match(/(\w+)\s*=\s*(\d+)\s*([+\-*/])\s*(\d+)/);if(s){const[,d,m,x,f]=s;let p;switch(x){case"+":p=parseInt(m)+parseInt(f);break;case"-":p=parseInt(m)-parseInt(f);break;case"*":p=parseInt(m)*parseInt(f);break;case"/":p=parseInt(m)/parseInt(f);break}a+=`${d} = ${p}
`}}),(n.match(/print\(f['"](.*?)['"]\)/g)||[]).forEach(g=>{var m;const d=(((m=g.match(/['"](.*?)['"]/))==null?void 0:m[1])||"").replace(/\{(\w+)\}/g,(x,f)=>{const p=n.match(new RegExp(`${f}\\s*=\\s*(\\d+)`));return p?p[1]:x});a+=d+`
`}),a.trim()||(a="Code executed successfully (no output)"),t(a.trim())}catch(a){c(a)}},500)})},addOutput(n,t){this.output.push({type:n,content:t,timestamp:new Date().toLocaleTimeString()})},clearOutput(){this.output=[]},toggleOutputMode(){this.isTextMode=!this.isTextMode},toggleFunctionPanel(){this.isFunctionPanelOpen=!this.isFunctionPanelOpen},selectFunction(n){console.log("Selected function:",n.name)},toggleOutputSpan(){this.isOutputExpanded=!this.isOutputExpanded,this.$nextTick(()=>{this.scrollOutputToBottom()})},scrollOutputToBottom(){this.$nextTick(()=>{const n=this.$refs.outputContainer;n&&(n.scrollTop=n.scrollHeight)})},async handleFileUpload(n){const t=n.target.files[0];if(t){if(!t.name.endsWith(".py")){alert("Please upload only Python (.py) files"),n.target.value="";return}try{const c=await this.readFileContent(t);this.code=c,this.addOutput("output",`File "${t.name}" loaded successfully`)}catch(c){this.addOutput("error",`Error reading file: ${c.message}`)}n.target.value=""}},readFileContent(n){return new Promise((t,c)=>{const a=new FileReader;a.onload=o=>t(o.target.result),a.onerror=o=>c(new Error("Failed to read file")),a.readAsText(n)})},undoCode(){this.canUndo&&(this.isUndoRedo=!0,this.historyIndex--,this.code=this.codeHistory[this.historyIndex])},redoCode(){this.canRedo&&(this.isUndoRedo=!0,this.historyIndex++,this.code=this.codeHistory[this.historyIndex])},saveToHistory(){this.codeHistory=this.codeHistory.slice(0,this.historyIndex+1),this.codeHistory.push(this.code),this.historyIndex++,this.codeHistory.length>50&&(this.codeHistory.shift(),this.historyIndex--)}}},D={class:"app-container"},N={class:"main-content"},Z={class:"top-header"},J=["title"],W=["src"],z={class:"content-area run-content"},G={class:"chat-column"},K={class:"chat-content"},j={class:"chat-container"},q={class:"chat-messages",ref:"messagesContainer"},Q={class:"message-content"},X={class:"message-time"},Y={key:0,class:"empty-state"},$={class:"chat-input-container"},tt={class:"input-wrapper"},et=["disabled"],st=["title"],ot={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},it=["disabled"],rt={key:0,class:"recording-indicator"},lt={class:"code-header"},ct=["disabled"],at={class:"code-editor-wrapper"},dt={class:"code-toolbar"},ut={for:"file-upload",class:"toolbar-button",title:"Upload Python file"},ht=["src"],pt=["disabled"],gt=["src"],mt=["disabled"],ft=["src"],yt={class:"output-header"},vt={class:"output-actions"},Ct=["src"],xt=["src"],wt=["src"],_t=["src"],It=["title"],bt=["src"],Mt=["src"],kt={key:0,class:"empty-output"},Rt={key:1,class:"output-lines"},Tt={key:0,class:"output-prefix"},St={key:1,class:"output-prefix"},Ot={key:2,class:"output-prefix"},Ht={class:"output-text"},Ft={key:2,class:"output-graphic"},Pt={key:0,class:"graphic-input"},Et={class:"graphic-content"},Ut={key:1,class:"graphic-output"},Vt={class:"graphic-content"},Bt={key:2,class:"graphic-error"},Lt={class:"graphic-content"},At={class:"function-panel-header"},Dt={class:"function-panel-content"},Nt=["onClick"],Zt={class:"function-item-name"},Jt={class:"function-item-description"};function Wt(n,t,c,a,o,i){const w=M("TopToolbar"),g=M("Sidebar");return r(),l("div",D,[_(w),_(g),e("main",N,[e("header",Z,[t[15]||(t[15]=e("h2",{class:"page-title"},"Code Space",-1)),e("button",{class:"function-panel-toggle",onClick:t[0]||(t[0]=(...s)=>i.toggleFunctionPanel&&i.toggleFunctionPanel(...s)),title:o.isFunctionPanelOpen?"Hide functions panel":"Show functions panel"},[e("img",{src:o.functionPanelIcon,alt:"Functions",class:"function-panel-icon"},null,8,W)],8,J)]),e("div",z,[e("div",G,[e("div",K,[e("div",j,[e("div",q,[(r(!0),l(v,null,C(o.messages,(s,d)=>(r(),l("div",{key:d,class:u(["message",s.type])},[e("div",Q,h(s.text),1),e("div",X,h(s.time),1)],2))),128)),o.messages.length===0?(r(),l("div",Y,[...t[16]||(t[16]=[e("p",null,"Start a conversation by typing a message or using the microphone",-1)])])):y("",!0)],512),e("div",$,[e("div",tt,[I(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.inputMessage=s),onKeyup:t[2]||(t[2]=S((...s)=>i.sendMessage&&i.sendMessage(...s),["enter"])),placeholder:"Type your message...",class:"chat-input",disabled:o.isRecording},null,40,et),[[b,o.inputMessage]]),e("button",{class:u(["mic-button",{recording:o.isRecording}]),onClick:t[3]||(t[3]=(...s)=>i.toggleRecording&&i.toggleRecording(...s)),title:o.isRecording?"Stop recording":"Start voice recording"},[o.isRecording?(r(),l("svg",nt,[...t[18]||(t[18]=[e("path",{d:"M12 14C11.45 14 11 13.55 11 13V7C11 6.45 11.45 6 12 6C12.55 6 13 6.45 13 7V13C13 13.55 12.55 14 12 14ZM10 19C10 19.55 10.45 20 11 20H13C13.55 20 14 19.55 14 19V18H10V19ZM16 10H20C20.55 10 21 10.45 21 11C21 11.55 20.55 12 20 12H16C15.45 12 15 11.55 15 11C15 10.45 15.45 10 16 10ZM4 10H8C8.55 10 9 10.45 9 11C9 11.55 8.55 12 8 12H4C3.45 12 3 11.55 3 11C3 10.45 3.45 10 4 10Z",fill:"currentColor"},null,-1)])])):(r(),l("svg",ot,[...t[17]||(t[17]=[e("path",{d:"M12 14C13.1 14 14 13.1 14 12V6C14 4.9 13.1 4 12 4C10.9 4 10 4.9 10 6V12C10 13.1 10.9 14 12 14ZM19 12C19 15.87 15.87 19 12 19V21H16V23H8V21H12V19C8.13 19 5 15.87 5 12H7C7 14.76 9.24 17 12 17C14.76 17 17 14.76 17 12H19Z",fill:"currentColor"},null,-1)])]))],10,st),e("button",{class:"send-button",onClick:t[4]||(t[4]=(...s)=>i.sendMessage&&i.sendMessage(...s)),disabled:!o.inputMessage.trim()&&!o.isRecording},[...t[19]||(t[19]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z",fill:"currentColor"})],-1)])],8,it)]),o.isRecording?(r(),l("div",rt,[...t[20]||(t[20]=[e("span",{class:"recording-dot"},null,-1),O(" Recording... ",-1)])])):y("",!0)])])])]),e("div",{class:u(["code-output-column",{"output-expanded":o.isOutputExpanded}])},[e("div",{class:u(["code-section",{hidden:o.isOutputExpanded}])},[e("div",lt,[t[22]||(t[22]=e("h3",{class:"section-title"},"Code Editor",-1)),e("button",{class:"run-button",onClick:t[5]||(t[5]=(...s)=>i.runCode&&i.runCode(...s)),disabled:o.isRunning},[t[21]||(t[21]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8 5V19L19 12L8 5Z",fill:"currentColor"})],-1)),e("span",null,h(o.isRunning?"Running...":"Run"),1)],8,ct)]),e("div",at,[e("div",dt,[e("input",{type:"file",ref:"fileInput",onChange:t[6]||(t[6]=(...s)=>i.handleFileUpload&&i.handleFileUpload(...s)),accept:".py",style:{display:"none"},id:"file-upload"},null,544),e("label",ut,[e("img",{src:o.uploadFileIcon,alt:"Upload file",class:"toolbar-icon"},null,8,ht)]),e("button",{class:"toolbar-button",onClick:t[7]||(t[7]=(...s)=>i.undoCode&&i.undoCode(...s)),title:"Undo",disabled:!i.canUndo},[e("img",{src:o.undoIcon,alt:"Undo",class:"toolbar-icon"},null,8,gt)],8,pt),e("button",{class:"toolbar-button",onClick:t[8]||(t[8]=(...s)=>i.redoCode&&i.redoCode(...s)),title:"Redo",disabled:!i.canRedo},[e("img",{src:o.redoIcon,alt:"Redo",class:"toolbar-icon"},null,8,ft)],8,mt)]),I(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.code=s),class:"code-input",placeholder:"Enter your Python code here...",spellcheck:"false"},null,512),[[b,o.code]])])],2),e("div",{class:u(["output-section",{expanded:o.isOutputExpanded}])},[e("div",yt,[t[23]||(t[23]=e("h3",{class:"section-title"},"Output",-1)),e("div",vt,[e("div",{class:"mode-toggle",onClick:t[10]||(t[10]=(...s)=>i.toggleOutputMode&&i.toggleOutputMode(...s))},[e("div",{class:u(["toggle-track",{"text-mode":o.isTextMode,"graphic-mode":!o.isTextMode}])},[e("div",{class:u(["toggle-label-icon toggle-label-left",{active:o.isTextMode}])},[e("img",{src:o.textModeIcon,alt:"Text mode",class:"toggle-label-icon-img"},null,8,Ct)],2),e("div",{class:u(["toggle-slider",{active:o.isTextMode}])},[o.isTextMode?(r(),l("img",{key:0,src:o.textModeIcon,alt:"Text mode",class:"toggle-icon"},null,8,xt)):(r(),l("img",{key:1,src:o.graphicModeIcon,alt:"Graphic mode",class:"toggle-icon"},null,8,wt))],2),e("div",{class:u(["toggle-label-icon toggle-label-right",{active:!o.isTextMode}])},[e("img",{src:o.graphicModeIcon,alt:"Graphic mode",class:"toggle-label-icon-img"},null,8,_t)],2)],2)]),e("button",{class:"span-button",onClick:t[11]||(t[11]=(...s)=>i.toggleOutputSpan&&i.toggleOutputSpan(...s)),title:o.isOutputExpanded?"Collapse output":"Expand output to full column"},[e("img",{src:o.spanIcon,alt:"Span output",class:"toolbar-icon"},null,8,bt)],8,It),e("button",{class:"clear-button",onClick:t[12]||(t[12]=(...s)=>i.clearOutput&&i.clearOutput(...s)),title:"Clear output"},[e("img",{src:o.clearIcon,alt:"Clear output",class:"toolbar-icon"},null,8,Mt)])])]),e("div",{class:u(["output-content",{"text-mode":o.isTextMode,"graphic-mode":!o.isTextMode}]),ref:"outputContainer"},[o.output.length===0?(r(),l("div",kt,[...t[24]||(t[24]=[e("p",null,"Output will appear here after running your code",-1)])])):o.isTextMode?(r(),l("div",Rt,[(r(!0),l(v,null,C(o.output,(s,d)=>(r(),l("div",{key:d,class:u(["output-line",s.type])},[s.type==="input"?(r(),l("span",Tt,"In:")):s.type==="output"?(r(),l("span",St,"Out:")):s.type==="error"?(r(),l("span",Ot,"Error:")):y("",!0),e("pre",Ht,h(s.content),1)],2))),128))])):(r(),l("div",Ft,[(r(!0),l(v,null,C(o.output,(s,d)=>(r(),l("div",{key:d,class:u(["graphic-line",s.type])},[s.type==="input"?(r(),l("div",Pt,[t[25]||(t[25]=e("div",{class:"graphic-label"},"Input",-1)),e("div",Et,h(s.content),1)])):s.type==="output"?(r(),l("div",Ut,[t[26]||(t[26]=e("div",{class:"graphic-label"},"Output",-1)),e("div",Vt,h(s.content),1)])):s.type==="error"?(r(),l("div",Bt,[t[27]||(t[27]=e("div",{class:"graphic-label"},"Error",-1)),e("div",Lt,h(s.content),1)])):y("",!0)],2))),128))]))],2)],2)],2)]),o.isFunctionPanelOpen?(r(),l("div",{key:0,class:"function-panel-overlay",onClick:t[13]||(t[13]=(...s)=>i.toggleFunctionPanel&&i.toggleFunctionPanel(...s))})):y("",!0),e("div",{class:u(["function-panel",{open:o.isFunctionPanelOpen}])},[e("div",At,[t[29]||(t[29]=e("h3",{class:"function-panel-title"},"Available Functions",-1)),e("button",{class:"function-panel-close",onClick:t[14]||(t[14]=(...s)=>i.toggleFunctionPanel&&i.toggleFunctionPanel(...s)),title:"Close panel"},[...t[28]||(t[28]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),e("div",Dt,[(r(!0),l(v,null,C(o.availableFunctions,s=>(r(),l("div",{key:s.id,class:"function-item",onClick:d=>i.selectFunction(s)},[e("div",Zt,h(s.name),1),e("div",Jt,h(s.description),1)],8,Nt))),128))])],2)])])}const jt=k(A,[["render",Wt],["__scopeId","data-v-9e4c760e"]]);export{jt as default};
